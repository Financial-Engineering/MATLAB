RBCtcdate=datenum(2006,11,21);
RBCtdate=datenum(2005,11,21);

RBCti=linspace((datenum(2007,1,21)-RBCtdate)/365,(datenum(2007,11,21)-RBCtdate)/365,11)';
RBCtc=(RBCtcdate-RBCtdate)/365;

RBCrd1=(0.032148645-0.030956309)/(471/365-380/365)*(RBCti(1)-380/365)+0.030956309;
RBCrd2=(0.032148645-0.030956309)/(471/365-380/365)*(RBCti(2)-380/365)+0.030956309;
RBCrd3=(0.033172376-0.032148645)/(563/365-471/365)*(RBCti(3)-471/365)+0.032148645;
RBCrd4=(0.033172376-0.032148645)/(563/365-471/365)*(RBCti(4)-471/365)+0.032148645;
RBCrd5=(0.033172376-0.032148645)/(563/365-471/365)*(RBCti(5)-471/365)+0.032148645;
RBCrd6=(0.035363884-0.033172376)/(731/365-563/365)*(RBCti(6)-563/365)+0.033172376;
RBCrd7=(0.035363884-0.033172376)/(731/365-563/365)*(RBCti(7)-563/365)+0.033172376;
RBCrd8=(0.035363884-0.033172376)/(731/365-563/365)*(RBCti(8)-563/365)+0.033172376;
RBCrd9=(0.035363884-0.033172376)/(731/365-563/365)*(RBCti(9)-563/365)+0.033172376;
RBCrd10=(0.035363884-0.033172376)/(731/365-563/365)*(RBCti(10)-563/365)+0.033172376;
RBCrd11=(0.035363884-0.033172376)/(731/365-563/365)*(RBCti(11)-563/365)+0.033172376;

rd=[RBCrd1;RBCrd2;RBCrd3;RBCrd4;RBCrd5;RBCrd6;RBCrd7;RBCrd8;RBCrd9;RBCrd10;RBCrd11];

RBCrf1=(0.019520328-0.017673668)/(471/365-380/365)*(RBCti(1)-380/365)+0.017673668;
RBCrf2=(0.019520328-0.017673668)/(471/365-380/365)*(RBCti(2)-380/365)+0.017673668;
RBCrf3=(0.021474184-0.019520328)/(562/365-471/365)*(RBCti(3)-471/365)+0.019520328;
RBCrf4=(0.021474184-0.019520328)/(562/365-471/365)*(RBCti(4)-471/365)+0.019520328;
RBCrf5=(0.021474184-0.019520328)/(562/365-471/365)*(RBCti(5)-471/365)+0.019520328;
RBCrf6=(0.023574198-0.021474184)/(658/365-562/365)*(RBCti(6)-562/365)+0.021474184;
RBCrf7=(0.023574198-0.021474184)/(658/365-562/365)*(RBCti(7)-562/365)+0.021474184;
RBCrf8=(0.023574198-0.021474184)/(658/365-562/365)*(RBCti(8)-562/365)+0.021474184;
RBCrf9=(0.025466248-0.023574198)/(749/365-658/365)*(RBCti(9)-658/365)+0.023574198;
RBCrf10=(0.025466248-0.023574198)/(749/365-658/365)*(RBCti(10)-658/365)+0.023574198;
RBCrf11=(0.025466248-0.023574198)/(749/365-658/365)*(RBCti(11)-658/365)+0.023574198;

rf=[RBCrf1;RBCrf2;RBCrf3;RBCrf4;RBCrf5;RBCrf6;RBCrf7;RBCrf8;RBCrf9;RBCrf10;RBCrf11];

RBCvoldate1=datenum(2005,11,21);
RBCvoldate2=datenum(2006,11,21);
RBCvoldate3=datenum(2007,12,22);

RBCvold1=(RBCvoldate1-RBCtdate)/365;
RBCvold2=(RBCvoldate2-RBCtdate)/365;
RBCvold3=(RBCvoldate3-RBCtdate)/365;

RBCvol1=(0.32596012-0.3)/(761/365-365/365)*(RBCti(1)-365/365)+0.3;
RBCvol2=(0.32596012-0.3)/(761/365-365/365)*(RBCti(2)-365/365)+0.3;
RBCvol3=(0.32596012-0.3)/(761/365-365/365)*(RBCti(3)-365/365)+0.3;
RBCvol4=(0.32596012-0.3)/(761/365-365/365)*(RBCti(4)-365/365)+0.3;
RBCvol5=(0.32596012-0.3)/(761/365-365/365)*(RBCti(5)-365/365)+0.3;
RBCvol6=(0.32596012-0.3)/(761/365-365/365)*(RBCti(6)-365/365)+0.3;
RBCvol7=(0.32596012-0.3)/(761/365-365/365)*(RBCti(7)-365/365)+0.3;
RBCvol8=(0.32596012-0.3)/(761/365-365/365)*(RBCti(8)-365/365)+0.3;
RBCvol9=(0.32596012-0.3)/(761/365-365/365)*(RBCti(9)-365/365)+0.3;
RBCvol10=(0.32596012-0.3)/(761/365-365/365)*(RBCti(10)-365/365)+0.3;
RBCvol11=(0.32596012-0.3)/(761/365-365/365)*(RBCti(11)-365/365)+0.3;

sig=[RBCvol1;RBCvol2;RBCvol3;RBCvol4;RBCvol5;RBCvol6;RBCvol7;RBCvol8;RBCvol9;RBCvol10;RBCvol11];

S=100;
K=100;

N=100;
alp=1/11*ones(11,1);
Spg=[];
ti = RBCti;
r=rd;
dividend=2*log(1+0.0177/2);

sigX=0.08;
rhoi=-0.2;
b=rf-dividend-rhoi*sig*sigX;
t=0;
T=(datenum(2007,11,21)-datenum(2005,11,21))/365;
rT=r(11);
df=exp(-rT*T);
